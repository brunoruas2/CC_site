<!doctype html>
<html>
    <head>
                <title>Algoritmos e Estrutura de Dados - Ciência da Computação</title>

            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">

            
            <link rel="canonical" href="https://brunoruas2.github.io/CC_site/nav/PUC/periodo2/algoritmo_estrutura_dados/">
            

            
                <link  rel="icon" type="image/x-icon" href="../../../../assets/logo.png">
            
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
                        <script>hljs.initHighlightingOnLoad();</script>
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="../../../../assets/css/bootstrap.min.css">
            <link rel="stylesheet" href="../../../../assets/css/main.min.css">
                <link href="../../../../css/custom.css" rel="stylesheet">
                <script src="../../../../javascripts/config.js"></script>
                <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
                <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
                <script src="../../../../search/main.js"></script>

            
                
            
    </head>

    <body>
        <div class="container py-3">
            <header>
                    <!-- block header -->
<nav class="navbar navbar-expand-xl border-bottom">
    <div class="container-fluid">
        
            <img class="logo" src="../../../../assets/logo.png">
        

        
            <span class="normal fs-4 title-color site-name" id="component-site-name" style="text-transform: uppercase;">Ciência da Computação</span>
        

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsMenu"
            aria-controls="navbarsMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse flex-column ml-auto" id="navbarsMenu">
            <ul class="navbar-nav">

                <!-- block menu -->
                <li class="nav-item">
                    <!-- block menu -->
    
        <li class="nav-item" id="component-menu">
            <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="
                            nav-link text-gray text-decoration-none" href="../../../..">[Home]</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class=" active 
                            nav-link dropdown-toggle text-decoration-none" href="#" data-bs-toggle="dropdown">[Tecnólogo]</a>
                            <ul class="dropdown-menu">
                                    <!-- block dropdown-menu -->
    <li>
        <a href="../../Sobre/puc/" class="dropdown-item text-decoration-none ">Tecnólogo</a>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a class="dropdown-item text-decoration-none" href="#">Período 1 &raquo;</a>
        <ul class="submenu dropdown-menu">
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo1/algoritmos_e_abstracao/" class="dropdown-item text-decoration-none ">Algoritmo e Abstração</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo1/algoritmos_e_logica/" class="dropdown-item text-decoration-none ">Algoritmo e Lógica</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo1/desenvolvimento_web/" class="dropdown-item text-decoration-none ">Desenvolvimento Web Frontend</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo1/matematica_basica/" class="dropdown-item text-decoration-none ">Matemática Básica</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo1/organizacao_computadores/" class="dropdown-item text-decoration-none ">Organização de Computadores</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo1/fundamentos_eng_soft/" class="dropdown-item text-decoration-none ">Fundamentos de Eng. de Software</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo1/pensamento_comp/" class="dropdown-item text-decoration-none ">Pensamento Computacional</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo1/logica_comp/" class="dropdown-item text-decoration-none ">Lógica Computacional</a>
    </li>
<!-- endblock -->
        </ul>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a class="dropdown-item text-decoration-none" href="#">Período 2 &raquo;</a>
        <ul class="submenu dropdown-menu">
                <!-- block dropdown-menu -->
    <li>
        <a href="./" class="dropdown-item text-decoration-none  active ">Algoritmos e Estrutura de Dados</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../" class="dropdown-item text-decoration-none ">Modelagem de Dados</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../engenharia_requisitos/" class="dropdown-item text-decoration-none ">Engenharia de Requisitos</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../design_interacao/" class="dropdown-item text-decoration-none ">Design de Interação</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../programacao_modular/" class="dropdown-item text-decoration-none ">Programação Modular</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../dev_web_backend/" class="dropdown-item text-decoration-none ">Desenvolvimento Web Back-End</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../" class="dropdown-item text-decoration-none ">Fundamentos de Redes de Computadores</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../" class="dropdown-item text-decoration-none ">Manipulação da Dados com SQL</a>
    </li>
<!-- endblock -->
        </ul>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a class="dropdown-item text-decoration-none" href="#">Período 3 &raquo;</a>
        <ul class="submenu dropdown-menu">
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo3/" class="dropdown-item text-decoration-none ">Modelagem e Gestão de Processos</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo3/estat_desc/" class="dropdown-item text-decoration-none ">Estatística Descritiva</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo3/dev_mobile/" class="dropdown-item text-decoration-none ">Desenvolvimento de Aplicações Móveis</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo3/gerencia_projetos/" class="dropdown-item text-decoration-none ">Gerência de Projetos de TI</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo3/gerencia_config/" class="dropdown-item text-decoration-none ">Gerência de Configuração</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo3/qualidade_processos/" class="dropdown-item text-decoration-none ">Qualidade de Processos de Software</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo3/gerencia_requisitos/" class="dropdown-item text-decoration-none ">Gerência de Requisitos de Software</a>
    </li>
<!-- endblock -->
        </ul>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a class="dropdown-item text-decoration-none" href="#">Período 4 &raquo;</a>
        <ul class="submenu dropdown-menu">
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo4/" class="dropdown-item text-decoration-none ">Cloud Computing</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo4/" class="dropdown-item text-decoration-none ">Projeto de Software</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo4/arquitetura_distribuida/" class="dropdown-item text-decoration-none ">Arquitetura de Software Distribuído</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo4/" class="dropdown-item text-decoration-none ">APIs e Web Services</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo4/" class="dropdown-item text-decoration-none ">Teste de Software</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo4/" class="dropdown-item text-decoration-none ">Banco de Dados NoSQL</a>
    </li>
<!-- endblock -->
        </ul>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a class="dropdown-item text-decoration-none" href="#">Período 5 &raquo;</a>
        <ul class="submenu dropdown-menu">
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo5/seguranca/" class="dropdown-item text-decoration-none ">Segurança Aplicada ao Desenvolvimento</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo5/" class="dropdown-item text-decoration-none ">Compliance em TI</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../periodo5/" class="dropdown-item text-decoration-none ">Implantação de Solução de TI</a>
    </li>
<!-- endblock -->
        </ul>
    </li>
<!-- endblock -->
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="
                            nav-link dropdown-toggle text-decoration-none" href="#" data-bs-toggle="dropdown">[Cursos]</a>
                            <ul class="dropdown-menu">
                                    <!-- block dropdown-menu -->
    <li>
        <a class="dropdown-item text-decoration-none" href="#">AWS &raquo;</a>
        <ul class="submenu dropdown-menu">
                <!-- block dropdown-menu -->
    <li>
        <a href="../../../Cursos/AwsSkillBuilder/cloudPratictioner/Getting_Started/" class="dropdown-item text-decoration-none ">Getting Started</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../../Cursos/AwsSkillBuilder/cloudPratictioner/Billing_Cost/" class="dropdown-item text-decoration-none ">Billing and Cost</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../../Cursos/AwsSkillBuilder/cloudPratictioner/Cloud_Acquisition/" class="dropdown-item text-decoration-none ">Cloud Aquisition</a>
    </li>
<!-- endblock -->
                <!-- block dropdown-menu -->
    <li>
        <a href="../../../Cursos/AwsSkillBuilder/cloudPratictioner/Cloud_Pratictioner/" class="dropdown-item text-decoration-none ">Cloud Practictioner</a>
    </li>
<!-- endblock -->
        </ul>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a class="dropdown-item text-decoration-none" href="#">Desenvolvedor.io &raquo;</a>
        <ul class="submenu dropdown-menu">
                <!-- block dropdown-menu -->
    <li>
        <a href="../../../Cursos/Desenvolvedor.io/Arquitetura_Software/Aula01-OOP/" class="dropdown-item text-decoration-none ">Orientação à Objetos</a>
    </li>
<!-- endblock -->
        </ul>
    </li>
<!-- endblock -->
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="
                            nav-link text-gray text-decoration-none" href="../../../tech/">[Sobre]</a>
                        </li>
            </ul>
        </li>
<!-- endblock -->
                </li>
                <!-- endblock -->

                <!-- block search -->
                <li class="nav-item">
                    <a class="collapsed" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                        <div class="md-search-icon">
                            <i class="fa fa-search" aria-hidden="true"></i>
                        </div>
                    </a>
                </li>
                <!--  endblock -->

                <!-- block source -->
                <li class="nav-item">
                    
                        
                            <!-- block source -->
<div class="md-source source-detail">
  <div class="md-source-repo-icon">
    <i class="fa fa-github-alt" aria-hidden="true"></i>
  </div>

  <div class="md-source-repo-url">
    <a href="https://github.com/brunoruas2/ciencia_computacao" class="md-source">
      brunoruas2/ciencia_computacao
    </a>

    <ul class="md-source-repo-text">
      <li>
        <i class="fa fa-tag" aria-hidden="true"></i>
        <img alt="GitHub tag (latest by date)"
          src="https://img.shields.io/github/v/tag/brunoruas2/ciencia_computacao?color=white&label=%20&style=flat-square">
      </li>

      <li>
        <i class="fa fa-star" aria-hidden="true"></i>
        <img alt="GitHub Repo stars"
          src="https://img.shields.io/github/stars/brunoruas2/ciencia_computacao?color=white&label=%20&style=flat-square">
      </li>

      <li>
        <i class="fa fa-code-fork" aria-hidden="true"></i>
        <img alt="GitHub forks"
          src="https://img.shields.io/github/forks/brunoruas2/ciencia_computacao?color=white&label=%20&style=flat-square">
      </li>
    </ul>
  </div>

</div>
<!--  endblock -->
                        
                    
                </li>
                <!--  endblock -->
            </ul>
        </div>
    </div>
</nav>
<!--  endblock -->
            </header>

            <main><!-- block search -->
<div class="collapse" id="collapseExample">
    <div role="search" class="search-box">
        <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
            <input type="text" name="q" class="search-query"
            placeholder="Search docs" title="Type search term here" />
        </form>
    </div>
</div>
<!-- endblock -->
                    <!-- block content -->
<section class="container post">
    <article>
        <header>
            
                <h1 class="bold title" id="component-title">Algoritmos e Estrutura de Dados</h1>
            
        </header>
        <p><h2 id="assuntos">Assuntos</h2>
<ul>
<li><a href="#aviso">Aviso</a></li>
<li><a href="#colecoes-nativas-das-linguagens-de-programacao"><strong>Coleções Nativas das Linguagens de Programação</strong></a><ul>
<li><a href="#principais-colecoes">Principais Coleções</a></li>
<li><a href="#colecoes-genéricas">Coleções Genéricas</a></li>
</ul>
</li>
<li><a href="#tipos-abstratos-de-dados"><strong>Tipos Abstratos de Dados</strong></a><ul>
<li><a href="#listas">Listas</a></li>
<li><a href="#arvore-binaria-e-tabela-hash">Árvore Binária e Tabela Hash</a></li>
</ul>
</li>
<li><a href="#bibliografia"><strong>Bibliografia</strong></a></li>
</ul>
<h2 id="aviso">Aviso</h2>
<p>Essa disciplina costuma ser muito mais difícil em um contexto de bacharel de análise e desenvolvimento de sistemas, engenharia de computação e ciência da computação. Não sei precisar o porquê mas nessa formação nós vamos ver apenas o básico de algumas estruturas e como podemos implementar algumas dessas estruturas em c#.</p>
<p>Como sempre,    <strong>não podemos nunca</strong> parar de estudar mais a fundo os assuntos introduzidos nos tópicos mais a frente. A bibliografia recomendada pode ser de grande valia.</p>
<p>Uma outra fonte <strong>espetacular</strong> encontrada aqui no github é esse <a href="https://joaoarthurbm.github.io/eda/">site</a> publicado pelo professor João Arthur Brunet. Vale muito a pena estudar por lá também (só cuidado porque lá é um curso de bacharelado então a pegada é bem mais profunda do que essa primeira parte do nosso material).</p>
<h2 id="colecoes-nativas-das-linguagens-de-programacao">Coleções Nativas das Linguagens de Programação</h2>
<p>Vamos relembrar alguns assuntos que aprendemos no período passado na matéria de Algoritmos e Abstração de Dados.</p>
<p><strong>Arrays</strong></p>
<p>São um tipo de tipo abstrato de dados homogêneos. É um conjunto de variáveis apresentadas em uma lista onde cada elemento recebe um índice de 0 a n-1.</p>
<p>A notação de um array depende do tipo nativo da variável com um par de colchetes.
<div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="n">array</span><span class="p">;</span><span class="w"> </span><span class="c1">// array de inteiros</span>
<span class="kt">double</span><span class="p">[]</span><span class="w"> </span><span class="n">nota</span><span class="p">;</span><span class="w"> </span><span class="c1">// array de ponto flutuante</span>
</code></pre></div>
Para criarmos um vetor em c# usamos o token <code>new</code>.
<div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="n">ind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[</span><span class="m">10</span><span class="p">];</span>
<span class="n">nota</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">double</span><span class="p">[</span><span class="m">12</span><span class="p">];</span>
</code></pre></div>
No exemplo acima, criamos dois arrays. O primeiro é um array de inteiros de 10 posições e o segundo é um array de double de 12 posições.</p>
<p>Para popularmos o array com valores, usamos o índice da posição como nos exemplos abaixo.
<div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="kt">int</span><span class="w"> </span><span class="n">vet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[</span><span class="m">3</span><span class="p">];</span>
<span class="n">vet</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// valor 1 na primeira posição</span>
<span class="n">vet</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">;</span><span class="w"> </span><span class="c1">// valor 10 na segunda posição</span>
<span class="c1">// valor 1 como a soma dos valores</span>
<span class="c1">// da posição 2 e 12</span>
<span class="n">vet</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vet</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">vet</span><span class="p">[</span><span class="m">11</span><span class="p">];</span>
</code></pre></div>
Podemos nos valer dos operadores de repetição para sistematicamente fazer uso dos valores de um array.
<div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="c1">// operador de posição do array</span>
<span class="kt">int</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="c1">// Loop para inserir manualmente os</span>
<span class="c1">// valores no nosso vetor de 3 posicoes</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">());</span>
<span class="p">}</span>
<span class="c1">// Loop para sabermos quais valores foram</span>
<span class="c1">// salvos pelo user</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">3</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">vet</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>
Se tentarmos acessar um valor fora do index de um array com uma posição não aceita, vamos receber um erro chamado <strong>Index out of Range Exception</strong>.</p>
<p><strong>Comentário:</strong> Aqui o professor propõe um exercício onde fazemos o input de um nome de aluno e a nota dele. A partir disso, o sistema calcula a média da turma e mostra a lista dos alunos que estão acima de média da turma. Fica ai o desafio para o leitor.</p>
<p><strong>Listas, Pilhas e Filas</strong></p>
<p>A partir do array, podemos entender tipos abstratos de dados que nos darão a base para o estudo desse microfundamento.</p>
<p>O primeiro TAD que vamos aprender é a <strong>Lista</strong>. Uma lista é um objeto que contém um array que recebe elementos em qualquer posição, um contador de elementos no array e métodos de inserção e remoção.</p>
<p>Uma lista possui alguns métodos úteis para manipulação dos dados:</p>
<ul>
<li>Construtores</li>
<li>Inserção de Elementos</li>
<li>Remoção de Elementos</li>
<li>Mostrar Elemento</li>
<li>Pesquisar index</li>
<li>Ordenar</li>
</ul>
<p>Como estamos falando de um objeto, o comportamento de cada método deve ser analisado na classe que será instanciada nele.</p>
<h3 id="principais-colecoes">Principais Coleções</h3>
<p>Aprendemos na disciplina de programação modular que existem várias coleções nativas no ambiente .NET que são otimizadas e devem compor o nosso repertório de soluções.</p>
<p>Vale lembrar que para ter acesso às coleções precisaremos acessar o namespace <strong>System.Collections</strong>.</p>
<p>Agora vamos aprender algumas classes interessantes para o nosso estudo.</p>
<h4 id="arraylist">ArrayList</h4>
<p>O <strong>ArrayList</strong> é um objeto similar ao array com a vantagem de podermos redimensionar dinamicamente o seu tamanho (o array simples tem tamanho fixo). A documentação oficial pode ser encontrada nesse <a href="https://learn.microsoft.com/pt-br/dotnet/api/system.collections.arraylist?view=net-5.0">link</a>.</p>
<p>Possui um método chamado <code>Capacity</code> que permite a manipulação da capacidade do nosso ArrayList. Por default, o seu valor é zero e, ao inserirmos um elemento, ele muda para quatro. A capacidade do ArrayList dobra automaticamente sempre que temos a necessidade de inserir novos elementos além da capacidade anterior.</p>
<p>Além do método de capacidade, temos o <code>Count</code> que nos dá o número de elementos no ArrayList.</p>
<p>O uso dele é feito através da instanciação do objeto por meio de dois comandos possívels.
<div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="c1">// criação sem informar a capacidade</span>
<span class="n">ArrayList</span><span class="w"> </span><span class="n">al1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span>
<span class="c1">// criação informando a capacidade inicial</span>
<span class="n">ArrayList</span><span class="w"> </span><span class="n">al2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">(</span><span class="m">10</span><span class="p">);</span>
</code></pre></div>
Aqui temos um exemplo simples da utilização desse objeto<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>.</p>
<p><div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">class</span><span class="w"> </span><span class="nc">MainClass</span><span class="p">{</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span>
<span class="w">        </span><span class="n">ArrayList</span><span class="w"> </span><span class="n">al</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;al.Capacity({0}) | al.Count({1})&quot;</span><span class="p">,</span><span class="n">al</span><span class="p">.</span><span class="n">Capacity</span><span class="p">,</span><span class="w"> </span><span class="n">al</span><span class="p">.</span><span class="n">Count</span><span class="p">);</span>
<span class="w">        </span><span class="n">al</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">al</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;string qualquer&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">al</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="m">3.1415</span><span class="p">);</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;al.Capacity({0}) | al.Count({1})&quot;</span><span class="p">,</span><span class="n">al</span><span class="p">.</span><span class="n">Capacity</span><span class="p">,</span><span class="w"> </span><span class="n">al</span><span class="p">.</span><span class="n">Count</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
Outra manipulação comum de se utilizar é a de operações em <strong>todos</strong> os elementos de um ArrayList. Para isso, podemos usar os operadores de repetição como o <code>for</code> e, além desse, um operador cujo token é <code>foreach</code>.</p>
<p><div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="w">    </span><span class="na">[...]</span>
<span class="w">    </span><span class="n">ArrayList</span><span class="w"> </span><span class="n">al</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span>
<span class="w">    </span><span class="na">[...]</span>
<span class="w">    </span><span class="c1">// forma 1</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">al</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">al</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// forma 2</span>
<span class="w">    </span><span class="k">foreach</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">al</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">al</span><span class="p">[</span><span class="n">o</span><span class="p">]);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// forma 3</span>
<span class="w">    </span><span class="k">foreach</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">al</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">soma</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">soma</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
Além dos métodos de capacidade e contagem, temos métodos que nos permitem interagir com o nosso arraylist:</p>
<ul>
<li><code>Add</code> - Insert de um valor com retorno da posição</li>
<li><code>Insert</code> - Insert de um valor na posição indicada</li>
<li><code>Remove</code> - Remove um valor</li>
<li><code>RemoveAt</code> - Remove um valor em um determinado index</li>
<li><code>RemoveRange</code> - Remove uma quantidade de elementos a partir de um index</li>
<li><code>Clear</code> - Remove todos os elementos</li>
<li><code>Contains</code> - Teste lógico se um valor existe no arraylist</li>
<li><code>IndexOf</code> - Retorna o index da primeira ocorrência de um valor</li>
<li><code>LastIndexOf</code> - Retorna o index da última ocorrência de um valor</li>
<li><code>Reverse</code> - Inverte a ordem</li>
<li><code>Sort</code> - Ordena os elementos</li>
<li><code>ToArray</code> - Copia os valores em um array</li>
<li><code>TrimToSize</code> - Altera o <code>capacity</code></li>
<li><code>BinarySearch</code> - Realiza uma <strong>busca binaria</strong><sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup></li>
</ul>
<p>Podemos aprender um pouco melhor o uso de alguns desses métodos a partir de um exemplo. Vamos construir um programa que lê 5 inteiros, somar todos em um arraylist e calcular a média deles. Depois disso, vamos mostrar os valores que são maiores que a média. Para isso, vamos usar dois métodos de laços de repetição, um <code>for</code> e um <code>foreach</code>.</p>
<p><div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span>
<span class="n">ArrayList</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span>
<span class="kt">double</span><span class="w"> </span><span class="n">media</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="n">d</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">valor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">int</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">Console</span><span class="p">.</span><span class="n">ReadLine</span><span class="p">());</span>
<span class="w">    </span><span class="n">list</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">valor</span><span class="p">);</span>
<span class="w">    </span><span class="n">media</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">valor</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">media</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="m">5</span><span class="p">;</span>
<span class="k">foreach</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">lista</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">o</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">media</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">o</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<strong>Comentário:</strong> O comando dentro da condicional <code>(int)o</code> é uma das várias maneiras de se converter um item de uma lista em um inteiro. Chamamos essa maneira de <code>TypeCasting</code><sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup> Além dela poderíamos usar <code>int.Parse()</code> ou <code>Convert.ToInt32()</code>. Aqui tem um <a href="https://www.delftstack.com/howto/csharp/convert-to-int-in-csharp/">texto falando mais sobre isso</a> e a <a href="https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/types/casting-and-type-conversions">aqui</a> temos a própria documentação da Microsoft.</p>
<h4 id="queue-stack-e-hashtable">Queue, Stack e Hashtable</h4>
<p>Além da lista vamos aprender outros conceitos de estrutura de dados muito usados no desenvolvimento de aplicações: Pilhas e Filas.</p>
<p>Uma <strong>Pilha</strong> ou <strong>Stack</strong> é um TAD que possui a característica que o <strong>primeiro elemento que entra é o último elemento que sai</strong>. A essa característica damos o nome de First In, Last Out (FILO).</p>
<p><strong>Comentário:</strong> Pense em uma pilha de pratos sujos na pia. O prato que foi colocado primeiro é o último prato que será limpo pois está na base da pilha de louça suja.</p>
<p>Uma <strong>Fila</strong> ou <strong>Queue</strong> é um TAD em que o <strong>primeiro elemento que entra é o primeiro a sair</strong>. O nome dessa característica é Fist In, First Out (FIFO).</p>
<p>As duas classes possuem métodos parecidos (dadas as diferenças já comentadas acima):</p>
<ul>
<li><code>enqueue</code>/<code>push</code> - Inserção de objetos</li>
<li><code>dequeue</code>/<code>pop</code> - Remoção de objetos</li>
<li><code>clear</code> - Remoção de todos os objetos</li>
<li><code>contains</code> - Retorno se um objeto está contido</li>
<li><code>peek</code> - Retorna o próximo objeto na ordem de remoção</li>
<li><code>count</code> - Quantidade de elementos na estrutura</li>
</ul>
<p>Aqui o professor propõe um desafio bem legal. Vamos ver um código c# com um programa de fila e transcrever para idioma o que o programa faz.
<div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="n">Queue</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Queue</span><span class="p">();</span>
<span class="n">f</span><span class="p">.</span><span class="n">Enqueue</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
<span class="n">f</span><span class="p">.</span><span class="n">Enqueue</span><span class="p">(</span><span class="m">2</span><span class="p">);</span>
<span class="n">f</span><span class="p">.</span><span class="n">Enqueue</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
<span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;Fila: ({0}) / ({1}) / ({2})&quot;</span><span class="p">,</span><span class="n">f</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="n">Count</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="n">Peek</span><span class="p">());</span>
<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">Dequeue</span><span class="p">());</span>
<span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;Fila: ({0}) / ({1}) / ({2})&quot;</span><span class="p">,</span><span class="n">f</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="n">Count</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="n">Peek</span><span class="p">());</span>
</code></pre></div>
Agora um outro programa para uma pilha.
<div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="n">Stack</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Stack</span><span class="p">();</span>
<span class="n">p</span><span class="p">.</span><span class="n">Push</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="n">Push</span><span class="p">(</span><span class="m">2</span><span class="p">);</span>
<span class="n">p</span><span class="p">.</span><span class="n">Push</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
<span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;Pilha: ({0}) / ({1}) / ({2})&quot;</span><span class="p">,</span><span class="n">p</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">Count</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">Peek</span><span class="p">());</span>
<span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">Pop</span><span class="p">());</span>
<span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;Pilha: ({0}) / ({1}) / ({2})&quot;</span><span class="p">,</span><span class="n">p</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">Count</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">Peek</span><span class="p">());</span>
</code></pre></div></p>
<p>A terceira estrutura de dados que vamos aprender é chamada <strong>Hashtable</strong>. Essa estrutura é do tipo dicionário, ou seja, para cada entrada de dados, temos uma par chave-valor. Podemos dividir o nome desse TAD em duas palavras: <strong>hash</strong> e <strong>table</strong>.</p>
<p>Table é simplesmente uma alusão à tabela. O que temos de novidade aqui é o termo <strong>hash</strong>.</p>
<p><strong>Comentário:</strong> Esse material é, em tese, um resumo dos conteúdos dados na graduação da PUC-MG, entretanto, quando eu sinto que o tópico está demasiadamente superficial, eu simplesmente não consigo evitar de expandir o conteúdo originalmente dado. Essa parte eu tirei do livro "Data Structures and Algorithms with Python".</p>
<p>A primeira coisa que precisamos para entender o que é esse conceito de hash é compreender que programas acessam a memória e que o tempo necessário para realizar esse trabalho pode variar de acordo com a maneira que os programas são construídos. Para lidar com essa preocupação os cientistas da computação criaram o conceito de notação Omnicron ou Big-Oh.</p>
<p>Formalmente, dada uma lista qualquer de tamanho <span class="arithmatex">\(n\)</span>, cujo tempo de acesso médio para coleta de um elemento dessa lista é dado pode <span class="arithmatex">\(f(n)\)</span>. Podemos definir que:</p>
<p><span class="arithmatex">\(\mathcal{O}(g(n)) = \{ f | \exists d &gt; 0, n_0 \in \mathbb{Z}^+ i 0 \leq f(n) \leq d g(n),\forall n \geq n_0 \}\)</span></p>
<p>Calma, respira. Não é nada difícil. Essa notação matemática toda ai quer dizer que podemos definir um grupo funções <span class="arithmatex">\(\mathcal{O}(g(n))\)</span> que são formadas por todas as funções <span class="arithmatex">\(f\)</span><sup id="fnref:4"><a class="footnote-ref" href="#fn:4">4</a></sup> em que temos algum <span class="arithmatex">\(d\)</span> maior que zero e um <span class="arithmatex">\(n_0\)</span> que é inteiro e positivo, de modo que, <span class="arithmatex">\(f(n)\)</span> é maior igual a zero e menor igual a <span class="arithmatex">\(d\)</span> vezes <span class="arithmatex">\(g(n)\)</span> para todo <span class="arithmatex">\(n\)</span> maior igual a <span class="arithmatex">\(n_0\)</span>.</p>
<p>Quando dizemos que um determinado programa tem <span class="arithmatex">\(\mathcal{O}(1)\)</span>, estamos dizendo que <span class="arithmatex">\(g(n) = 1\)</span>, ou seja, que nosso programa pertence ao conjunto de funções <span class="arithmatex">\(f\)</span> que, dado um valor qualquer de <span class="arithmatex">\(d\)</span>, tem o tempo de leitura de um elemento entre a faixa de tempo <span class="arithmatex">\(0 \leq f(n) \leq d\)</span> para qualquer <span class="arithmatex">\(n\)</span> da nossa lista.</p>
<p>Tudo isso é pra dizer que essa notação é usada para designar a relação entre o tempo de completude de uma tarefa e o tamanho dos dados necessários para a sua realização (que começa em <span class="arithmatex">\(n_0\)</span> e vai até <span class="arithmatex">\(n\)</span>). Quando esse acesso à informação de um elemento qualquer não é afetado pelo volume de dados da lista, dizemos que ele possui um <strong>tempo de execução constante</strong> denotado por <span class="arithmatex">\(\mathcal{O}(1)\)</span>.</p>
<p>Várias operações básicas possuem essa característica como somar, multiplicar ou comparar valores, levam apenas o tempo de um ciclo de computação para ser realizadas.</p>
<p>Agora que entendemos (bem por cima). o conceito de complexidade, podemos entender o conceito de hash. A primeira coisa que precisamos saber é que hashing é uma técnica muito eficiente de pesquisar por um valor.</p>
<p>Imaginem que temos um conjunto de vários elementos e queremos testar se um valor qualquer faz parte ou não desse conjunto. Não é difícil perceber que, caso o tamanho do conjunto aumente muito, o tempo necessário para essa verificação será cada vez maior porque teríamos de verificar se todos os ítens do nosso conjunto são iguais ao elemento que queremos verificar. Entretanto, é ai que podemos aplicar a técnica de hashing para reduzir a complexidade dessa tarefa para <span class="arithmatex">\(\mathcal{O}(1)\)</span>.</p>
<p>Para isso, precisamos compreender que, pelo <a href="https://en.wikipedia.org/wiki/Random_access">princípio do acesso randômico</a>, o acesso a qualquer elemento em uma lista é <span class="arithmatex">\(\mathcal{O}(1)\)</span>. Tudo que precisamos fazer é usar uma função que "traduza" os elementos do nosso conjunto para uma lista de referência (ou index). A partir disso, podemos verificar a pertinência de um elemento qualquer simplesmente usando a mesma função para ver se esse novo index já existe na nossa lista de index do conjunto.</p>
<p>Essa função especial é chamada de <strong>função de hash</strong>.</p>
<p>Tal qual as outras classes, também temos métodos muito úteis que vale a pena conhecer:</p>
<ul>
<li><code>add</code> - Insere um objeto com o index na tabela</li>
<li><code>remove</code> - Remove um objeto</li>
<li><code>clear</code> - Remove todos os objetos</li>
<li><code>contains</code> - Teste se a tabela contém um objeto com uma dada chave</li>
<li><code>containsKey</code> - idem contains</li>
<li><code>containsValue</code> - Teste se a tabela contém um determinado valor</li>
<li><code>count</code> - Quantos objetos temos</li>
</ul>
<p>Só temos que ter alguns cuidados ao usarmos uma estrutura de hashtable porque podemos ter problemas de <strong>colisões primárias</strong> que acontecem quando a posição no array de index já está ocupada por um elemento.</p>
<h3 id="colecoes-genericas">Coleções Genéricas</h3>
<p>Começamos a ver esse assunto em programação modular e agora vamos adentrar um pouco mais nele.</p>
<p>Uma grande diferença entre as coleções anteriores e às genéricas é que nas últimas temos que declarar os tipos no momento da criação <strong>sem possibilidade de misturar tipos</strong> dentro do objeto. Enquanto as classes padrões permitiam qualquer tipo de dados misturados.</p>
<p><strong>Comentário:</strong> O <code>&lt;T&gt;</code> na escrita dessas classes é justamente para indicar que somos obrigados a indicar o <strong>tipo</strong> do dado no momento da criação do objeto.</p>
<p>Cada collection apresentada nas seções anteriores desse capítulo possui uma versão genérica de modo que seus métodos e propriedade são, em algum grau, análogos. Todas elas são acessíveis pelo namespace <code>System.Collections.Generic</code>.</p>
<p>Em termos de analogias, podemos fazer os seguintes paralelos.</p>
<table>
<thead>
<tr>
<th align="center"><strong>Padrão</strong></th>
<th align="center"><strong>Generic</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>ArrayList</code></td>
<td align="center"><code>List&lt;T&gt;</code> ou <code>LinkedList&lt;T&gt;</code></td>
</tr>
<tr>
<td align="center"><code>Queue</code></td>
<td align="center"><code>Queue&lt;T&gt;</code></td>
</tr>
<tr>
<td align="center"><code>Stack</code></td>
<td align="center"><code>Stack&lt;T&gt;</code></td>
</tr>
<tr>
<td align="center"><code>Hashtable</code></td>
<td align="center"><code>Dictionary&lt;TKey,TValue&gt;</code></td>
</tr>
</tbody>
</table>
<h5 id="list">List<T></h5>
<p>A documentação oficial pode ser encontrada nesse <a href="https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.list-1?view=net-7.0">link</a>.</p>
<p>A declaração é feita por:</p>
<p><code>List&lt;T&gt; variavel = new List&lt;T&gt;()</code>;</p>
<p>As propriedades de contagem e capacidade são iguais às da arraylist. Os métodos de busca, inserção, remoção, conversão para array e outros são iguais também.</p>
<p>Uma mudança que vale a pena destacar é no método <code>TrimToSize()</code> que na lista genérica vira o método <code>TrimExcess()</code>.</p>
<p>Para aprendermos melhor a diferença entre o <code>ArrayList</code> e a lista genérica, vamos definir uma classe <code>Aluno</code> que vamos usar na construção de dois programas que farão a mesma atividade.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Aluno</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">matricula</span><span class="p">;</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">nome</span><span class="p">;</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">email</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// construtor vazio</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">Aluno</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">nome</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">matricula</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// construtor</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">Aluno</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">nome</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">matricula</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">email</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">nome</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nome</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">email</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">matricula</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">matricula</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// procedimento</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Mostrar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;nome: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">nome</span><span class="w"> </span><span class="o">+</span>
<span class="w">        </span><span class="s">&quot;mat: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">matricula</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; email: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">email</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Podemos ver que essa classe possui dois construtores e um método chamado <code>Mostrar</code> que imprime na tela os dados do objeto.</p>
<p>Agora vamos comparar dois programas que realizam a mesma tarefa onde, em um usamos ArrayList e, no outro, usamos Lista genérica.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="c1">// PROGRAMA USANDO ARRAYLIST //</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Aluno</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">[...]</span><span class="w"> </span><span class="p">}</span>
<span class="c1">// Procedimento de impressão dos elementos da ArrayList</span>
<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Mostrar</span><span class="p">(</span><span class="n">ArrayList</span><span class="w"> </span><span class="n">al</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">foreach</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">al</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="p">((</span><span class="n">Aluno</span><span class="p">)</span><span class="n">o</span><span class="p">).</span><span class="n">Mostrar</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="c1">// programa usando o ArrayList</span>
<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ArrayList</span><span class="w"> </span><span class="n">al</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// Inserindo 5 alunos usando números aleatórios</span>
<span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="m">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">Abs</span><span class="p">((</span><span class="k">new</span><span class="w"> </span><span class="n">Random</span><span class="p">()).</span><span class="n">Next</span><span class="p">())</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">100</span><span class="p">;</span>
<span class="w">        </span><span class="n">al</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Aluno</span><span class="p">(</span><span class="s">&quot;Aluno &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num</span><span class="p">,</span><span class="w"> </span><span class="n">num</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;aluno&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;@a.com.br&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// Inserindo um aluno manualmente</span>
<span class="w">    </span><span class="n">Aluno</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Aluno</span><span class="p">(</span><span class="s">&quot;Bruno&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">101</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bruno@gmail.com&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">al</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="n">a</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Mostrando o primeiro elemento</span>
<span class="w">    </span><span class="p">((</span><span class="n">Aluno</span><span class="p">)</span><span class="n">al</span><span class="p">[</span><span class="m">0</span><span class="p">]).</span><span class="n">Mostrar</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// Removendo o aluno inserido manualmente</span>
<span class="w">    </span><span class="n">al</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Teste de Contains</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">al</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Elemento encontrado!&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Elemento não encontrado!&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// Reduzindo a capacidade para o número de elementos</span>
<span class="w">    </span><span class="n">al</span><span class="p">.</span><span class="n">TrimToSize</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// Removendo todos os elementos</span>
<span class="w">    </span><span class="n">al</span><span class="p">.</span><span class="n">Clear</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p><div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="c1">// PROGRAMA USANDO LISTA GENÉRICA //</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Aluno</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">[...]</span><span class="w"> </span><span class="p">}</span>
<span class="c1">// Procedimento de impressão dos elementos da ArrayList</span>
<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Mostrar</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Aluno</span><span class="o">&gt;</span><span class="w"> </span><span class="n">l</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">foreach</span><span class="p">(</span><span class="n">Aluno</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">l</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">a</span><span class="p">.</span><span class="n">Mostrar</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
<span class="k">public</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Aluno</span><span class="o">&gt;</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Aluno</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// Inserindo 5 alunos usando números aleatórios</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="m">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">Abs</span><span class="p">((</span><span class="k">new</span><span class="w"> </span><span class="n">Random</span><span class="p">()).</span><span class="n">Next</span><span class="p">())</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">100</span><span class="p">;</span>
<span class="w">        </span><span class="n">l</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Aluno</span><span class="p">(</span><span class="s">&quot;Aluno &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num</span><span class="p">,</span><span class="w"> </span><span class="n">num</span><span class="p">,</span>
<span class="w">        </span><span class="s">&quot;aluno&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;@a.com.br&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// Inserindo um aluno manualmente</span>
<span class="w">    </span><span class="n">Aluno</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Aluno</span><span class="p">(</span><span class="s">&quot;Bruno&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">101</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bruno@gmail.com&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">al</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="n">a</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Mostrando o primeiro elemento</span>
<span class="w">    </span><span class="n">l</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">Mostrar</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// Removendo o aluno inserido manualmente</span>
<span class="w">    </span><span class="n">l</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Teste de Contains</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">l</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Elemento encontrado!&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Elemento não encontrado!&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// Reduzindo a capacidade para o número de elementos</span>
<span class="w">    </span><span class="n">l</span><span class="p">.</span><span class="n">TrimExcess</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// Removendo todos os elementos</span>
<span class="w">    </span><span class="n">l</span><span class="p">.</span><span class="n">Clear</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
Comparando os dois programas, podemos ver que existem diferenças no modo como usamos elementos contidos nas duas estruturas de dados. Quando usamos um elemento de um ArrayList, o c# precisa converter o elemento de <code>object</code> para algum tipo primitivo. Chamamos esse processo de <strong>boxing</strong>. Esse é o motivo de termos que usar o TypeCasting.</p>
<p>Essa necessidade não existe na lista genérica porque ela nos obriga a declarar o tipo dos elementos no momento da criação do objeto. Por isso a recuperação dos elementos é mais simples de ser feita apenas com a passagem do index.</p>
<h5 id="linkedlistt">LinkedList&lt;T></h5>
<p>A documentação oficial está disponível nesse <a href="https://docs.microsoft.com/pt-br/dotnet/api/system.collections.generic.linkedlist-1?view=net-5.0">link</a>.</p>
<p>A linkedlist é a aplicação em c# de uma lista flexível. Isso quer dizer que a memória é alocada somente quando existe a necessidade, uma célula por vez e não em "blocos" de 4 unidades como na lista genérica.</p>
<p>Outa diferença é que, do lado do hardware, a lista genérica salva os seus valores continuamente ao longo da memória. Por sua vez, a LinkedList salva em cada célula duas informações: o valor do item na posição e a referência para a próxima célula alocada na memória.</p>
<p>Ou seja, o nome linkedlist ou lista ligada é porque os nossos valores são "ligados" entre si por meio dessa fila de valores e referências de posições na memória<sup id="fnref:5"><a class="footnote-ref" href="#fn:5">5</a></sup>.</p>
<p>O final da fila sempre apontará para um endereço nulo. Essa é a indicação que ele é o último elemento da linkedlist. </p>
<p>Agora vamos ver alguns métodos úteis dessa classe:</p>
<ul>
<li><code>AddAfter</code> - Adiciona um valor novo como referência de um célula anterior ao novo valor</li>
<li><code>AddBefore</code> - Adiciona um valor novo como referência de um célula posterior ao novo valor</li>
<li><code>AddFirst</code> - Muda o item de posição 0</li>
<li><code>AddLast</code> - Muda item de posição n-1</li>
<li><code>Remove</code> - Libera o espaço na memória para uma nova alocação da primeira aparição do valor</li>
<li><code>RemoveFirst</code></li>
<li><code>RemoveLast</code></li>
<li><code>Clear</code></li>
<li><code>Contains</code></li>
<li><code>Find</code> - Retorna a primeira ocorrência</li>
<li><code>FindLast</code> - Retorna a última ocorrência</li>
</ul>
<p>Agora vamos ver um programa que utilize alguns desses métodos.
<div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>

<span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">LinkedList</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="w"> </span><span class="n">meses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">LinkedList</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="n">meses</span><span class="p">.</span><span class="n">AddFirst</span><span class="p">(</span><span class="s">&quot;janeiro&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">meses</span><span class="p">.</span><span class="n">AddLast</span><span class="p">(</span><span class="s">&quot;Fevereiro&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">meses</span><span class="p">.</span><span class="n">AddLast</span><span class="p">(</span><span class="s">&quot;Março&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">meses</span><span class="p">.</span><span class="n">RemoveFirst</span><span class="p">();</span>
<span class="w">    </span><span class="n">LinkedListNode</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">meses</span><span class="p">.</span><span class="n">Find</span><span class="p">(</span><span class="s">&quot;Fevereiro&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">meses</span><span class="p">.</span><span class="n">AddBefore</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s">&quot;Janeiro&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">mes</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">meses</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">mes</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<strong>Queue<T></strong> e <strong>Stack<T></strong></p>
<p>As documentações oficiais podem ser encontradas <a href="https://learn.microsoft.com/pt-br/dotnet/api/system.collections.generic.queue-1?view=net-5.0">aqui</a> e <a href="https://learn.microsoft.com/pt-br/dotnet/api/system.collections.generic.stack-1?view=net-5.0">aqui</a>.</p>
<p>Essas duas classes são muito parecidas com as versões padrões. A novidade aqui é que temos que definir os tipos nas coleções genéricas. De resto, são praticamente a mesma coisa.</p>
<p>Vamos ver um exemplo dessas classes.
<div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>

<span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Queue</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="n">f</span><span class="p">.</span><span class="n">Enqueue</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
<span class="w">    </span><span class="n">f</span><span class="p">.</span><span class="n">Enqueue</span><span class="p">(</span><span class="m">2</span><span class="p">);</span>
<span class="w">    </span><span class="n">f</span><span class="p">.</span><span class="n">Enqueue</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// remove o primeiro</span>
<span class="w">    </span><span class="n">f</span><span class="p">.</span><span class="n">Dequeue</span><span class="p">();</span>
<span class="w">    </span><span class="n">Stack</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Stack</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="n">p</span><span class="p">.</span><span class="n">Push</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
<span class="w">    </span><span class="n">p</span><span class="p">.</span><span class="n">Push</span><span class="p">(</span><span class="m">2</span><span class="p">);</span>
<span class="w">    </span><span class="n">p</span><span class="p">.</span><span class="n">Push</span><span class="p">(</span><span class="m">3</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// remove o último</span>
<span class="w">    </span><span class="n">p</span><span class="p">.</span><span class="n">Pop</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<strong>Dictionary<TKey,TValue></strong></p>
<p>A documentação oficial pode ser lida <a href="https://learn.microsoft.com/pt-br/dotnet/api/system.collections.generic.dictionary-2?view=net-5.0">aqui</a>.</p>
<p>Os métodos são bem parecidos com os da hashtable. Com a novidade do método <code>TryGetValue(TKey,out TValue)</code> onde, ao passarmos o valor da chave, caso ela exista no dicionário genérico, teremos como resposta um <code>true</code> junto do valor relacionado ao da chave pesquisada.</p>
<p>Dentre as propriedades podemos destacar as que retornam os valores do dicionário:</p>
<ul>
<li><code>Item</code> - Retorna a coleção do tipo <code>KeyValuePair&lt;TKey,TValue&gt;</code></li>
<li><code>Keys</code> - Retorna uma coleção do tipo <code>KeyCollection</code></li>
<li><code>Values</code> - Retorna uma coleção do tipo <code>ValueCollection</code></li>
</ul>
<p>Agora vamos ver um programa usando alguns métodos dessa classe.
<div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>

<span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">nota</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span>
<span class="w">    </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="n">nota</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;AED&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span><span class="s">&quot;Maria&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">60</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="s">&quot;Pedro&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="s">&quot;João&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">25</span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="n">nota</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;Calculo&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">{</span><span class="s">&quot;Tatiano&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">29</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="s">&quot;Ana Paula&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">16</span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="s">&quot;Kleber&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">22</span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="n">nota</span><span class="p">[</span><span class="s">&quot;AED&quot;</span><span class="p">].</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;Astrolabio&quot;</span><span class="p">,</span><span class="m">99</span><span class="p">);</span>
<span class="w">    </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">KeyValuePair</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="n">Dictionary</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">disciplina</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">nota</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">disciplina</span><span class="p">.</span><span class="n">Key</span><span class="p">);</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot; Alunos:&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">media</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="w">        </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">KeyValuePair</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Aluno</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">disciplina</span><span class="p">.</span><span class="n">Value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">Aluno</span><span class="p">.</span><span class="n">Key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;Nota: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Aluno</span><span class="p">.</span><span class="n">Value</span><span class="p">);</span>
<span class="w">            </span><span class="n">media</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">Aluno</span><span class="p">.</span><span class="n">Value</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">media</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="n">disciplina</span><span class="p">.</span><span class="n">Value</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Média da Turma: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">media</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<strong>Comentário:</strong> Aqui o professor não teve pena. E eu também não vou ter. <strong>Não siga adiante</strong> se você não for capaz de entender o que esse programa faz. Analise o código até fazer sentido.</p>
<h2 id="tipos-abstratos-de-dados">Tipos Abstratos de Dados</h2>
<p>A partir de agora, vamos estudar o funcionamento básico de algumas estruturas muito comuns na resolução de problemas computáveis: listas, árvores binárias e tabelas hash.</p>
<p>Na seção anterior, nós aprendemos como usar algumas implementações desses conceitos em c#. Agora, vamos estudar um pouco da teoria por trás dessas classes.</p>
<p><strong>Comentário:</strong> A partir de agora, vamos ver muito código. Sério. Se prepare, pegue uma boa dose de café e vamos embarcar nessa tonelada de código c#.</p>
<h3 id="listas">Listas</h3>
<p>As listas podem ser divididas em 2 tipos: lineares e não lineares. Das collections que vimos, podemos dizer que <code>ArrayList</code> e <code>List&lt;T&gt;</code> são exemplos de listas lineares e que a <code>LinkedList&lt;T&gt;</code> é um exemplo de lista não linear.</p>
<h4 id="lista-linear">Lista linear</h4>
<p>Uma lista linear, também chamada de sequencial, possui estruturas formadas por um array e um contador. Possuem método de inserção e remoção de elementos e, por ter tamanho definido, precisa ter alguma resolução para o caso onde uma inserção é solicitada mas o tamanho da lista já foi alcançado.</p>
<p>A primeira forma de se pensar na solução para o problema acima é simplesmente proibir que uma inserção ocorra quando o contador indicar que a lista alcançou o tamanho delimitado. Essa abordagem é mais simples e faremos uso dela logo mais a frente.</p>
<p>A segunda, é simplesmente permitir que esse limite seja expandido. Essa é justamente a abordagem usada nas collections <code>ArrayList</code> e <code>List&lt;T&gt;</code>. Ao se chegar no limite inicial, o processador cria um novo array de tamanho maior copiando todos os itens anteriores.</p>
<p>Nesta seção vamos construir uma lista linear "na unha". Assim vamos aprender melhor como esses métodos são implementados nas classes que usaremos ao longo da nossa jornada como desenvolvedores .NET.
<div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="c1">// Criação de uma lista linear</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ListaLinear</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="kt">int</span><span class="p">[]</span><span class="w"> </span><span class="n">array</span><span class="p">;</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// construtor vazio</span>
<span class="w">    </span><span class="n">ListaLinear</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[</span><span class="m">6</span><span class="p">];</span>
<span class="w">        </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">6</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// construtor com definição do tamanho</span>
<span class="w">    </span><span class="n">ListaLinear</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">tamanho</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="p">[</span><span class="n">tamanho</span><span class="p">];</span>
<span class="w">        </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// relação de procedimentos e métodos</span>
<span class="w">    </span><span class="k">void</span><span class="w"> </span><span class="nf">InserirInicio</span><span class="p">()</span><span class="w"> </span><span class="p">{...}</span>
<span class="w">    </span><span class="k">void</span><span class="w"> </span><span class="nf">InserirFinal</span><span class="p">()</span><span class="w"> </span><span class="p">{...}</span>
<span class="w">    </span><span class="k">void</span><span class="w"> </span><span class="nf">Inserir</span><span class="p">()</span><span class="w"> </span><span class="p">{...}</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">RemoverInicio</span><span class="p">()</span><span class="w"> </span><span class="p">{...}</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">RemoverFinal</span><span class="p">()</span><span class="w"> </span><span class="p">{...}</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">Remover</span><span class="p">()</span><span class="w"> </span><span class="p">{...}</span>
<span class="w">    </span><span class="k">void</span><span class="w"> </span><span class="nf">Mostrar</span><span class="p">()</span><span class="w"> </span><span class="p">{...}</span>
<span class="p">}</span>
</code></pre></div>
Agora vamos passar para a criação dos métodos indicados na parte final do nosso código.</p>
<p><div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="c1">// InserirInicio</span>
<span class="k">void</span><span class="w"> </span><span class="nf">InserirInicio</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// código encerra se tivermos mais ítens do que</span>
<span class="w">    </span><span class="c1">// a lista pode comportar</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="n">Length</span><span class="p">)</span>
<span class="w">        </span><span class="n">Environment</span><span class="p">.</span><span class="n">Exit</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="m">1</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">array</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="w">    </span><span class="n">n</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// InserirFinal</span>
<span class="k">void</span><span class="w"> </span><span class="nf">InserirFinal</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="n">Length</span><span class="p">)</span>
<span class="w">        </span><span class="n">Environment</span><span class="p">.</span><span class="n">Exit</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">array</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="w">    </span><span class="n">n</span><span class="o">++</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Inserir em qualquer posição</span>
<span class="k">void</span><span class="w"> </span><span class="nf">Inserir</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pos</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">array</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">os</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Environment</span><span class="p">.</span><span class="n">Exit</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// leva os elementos para o final do array</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">--</span><span class="p">){</span>
<span class="w">        </span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="m">1</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">array</span><span class="p">[</span><span class="n">pos</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="w">    </span><span class="n">n</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</code></pre></div>
Esses 3 métodos de inserção são tranquilos de entendermos. No caso do primeiro, ele move todo mundo pra direita e acrescenta o valor novo no index 0. No caso do inserir no final, ele simplesmente olha o contador e insere um elemento no index dele. Por fim, no caso do inserir genérico, ele primeiro move todos os elementos para a direita do index da posição indicada para depois inserir o elemento nela.</p>
<p><strong>Comentário:</strong> Bem legal vermos como um simples método de adição pode dar uma dor de cabeça para se pensar em como implementar a melhor maneira. Nas próximas vezes que usar um simples insert em uma lista, podemos pensar o que tá acontecendo por trás das bibliotecas que usamos.</p>
<p>Agora vamos para os métodos de remoção. São análogos aos métodos de inserção só que no caminho reverso.</p>
<p><div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="c1">// Remover primeiro elemento</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">RemoverInicio</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">        </span><span class="n">Environment</span><span class="p">.</span><span class="n">Exit</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">resp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
<span class="w">    </span><span class="n">n</span><span class="o">--</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="m">1</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">resp</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Remover o último elemento</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">RemoverFim</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">        </span><span class="n">Environment</span><span class="p">.</span><span class="n">Exit</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="o">--</span><span class="n">n</span><span class="p">];</span>
<span class="p">}</span>

<span class="c1">// Remove um elemento da posição</span>
<span class="c1">// movendo o resto para a esquerda</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">Remover</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">pos</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>
<span class="w">        </span><span class="n">Environment</span><span class="p">.</span><span class="n">Exit</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">resp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="n">pos</span><span class="p">];</span>
<span class="w">    </span><span class="n">n</span><span class="o">--</span><span class="p">;</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">n</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="m">1</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">resp</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<strong>Comentário:</strong> Novamente, se você está com dificuldade em entender esse código. <strong>Pare agora e revise o conteúdo</strong>. Não basta pegar o código e rodar no seu computador. Você é que deve ser capaz de ler e entender o código.</p>
<p>Agora só precisamos de um último método de mostrar os elementos da nossa lista linear.</p>
<p><div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="c1">// Mostra todos os elementos da lista</span>
<span class="k">void</span><span class="w"> </span><span class="nf">Mostrar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;[&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;]&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<strong>Comentário:</strong> Aqui vai um pequeno teste. Imagine que eu crie uma lista com essa classe instanciada. Qual será o output obtido caso a gente use o método <code>Mostrar()</code>?</p>
<p>O código integral desse programa pode ser encontrado no meu <a href="https://gist.github.com/brunoruas2/da13f73beddbc996d6a4663dc7575c67">github gist</a>.</p>
<h4 id="classe-autorreferencial">Classe Autorreferencial</h4>
<p>Uma classe autorreferencial possui a peculiaridade de fazer referência para objetos do seu próprio tipo. A <code>LinkedListNode&lt;T&gt;</code> é um exemplo dessa classe.</p>
<p>Abaixo temos um exemplo de código que implementa essa característica.</p>
<p><div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Celula</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">elemento</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// referencia para a próxima célula</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Celula</span><span class="w"> </span><span class="n">prox</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// construtor vazio</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">Celula</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">elemento</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">prox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// construtor com a passagem do parâmetro</span>
<span class="w">        </span><span class="k">public</span><span class="w"> </span><span class="nf">Celula</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">elemento</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">prox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
A vantagem dessa abordagem é que podemos criar elementos em cadeia. No exemplo acima, cada instanciação da classe pode ser relacionada a outra de maneira recursiva.</p>
<p><strong>Comentário:</strong> A gente viu um pouco sobre recursão lá no microfundamento de programação modular mas no contexto de uma função.</p>
<h4 id="lista-flexivel">Lista flexível</h4>
<p>Uma lista flexível é justamente a construção feita pelas classes autorreferenciais que acabamos de ver. Cada elemento instanciado é salvo na memória de modo a ocupar uma sequência aleatória de armazenamento no hardware da memória.</p>
<p>O <code>LinkedList&lt;T&gt;</code> é a implementação em c# desse conceito.</p>
<p>Existem duas maneiras de se criar uma lista flexível. A primeira, contém um primeiro elemento cujo valor <code>elemento</code> é null (chamamos esse elemento de "cabeça"). A segunda maneira, é colocarmos o valor do primeiro elemento diretamente no primeiro nó da cadeia de elementos.</p>
<p>A vantagem da primeira abordagem (com cabeça) é que tratamos o método de inserir em uma lista vazia exatamente do mesmo modo de inserir em uma lista de elementos. A razão disso é que só precisaremos mudar o atributo <code>prox</code> da cabeça. No caso da abordagem sem cabeça, teríamos que primeiro verificar se existem elementos para, em caso negativo, alterarmos o atributo <code>prox</code> para null desse primeiro elemento.</p>
<p>Abaixo temos a implementação de uma lista flexível que usa a classe autorreferencial da seção anterior.</p>
<p><div class="highlight"><pre><span></span><code><span class="c1">// c#</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ListaFlex</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// instanciação das posições obrigatórias</span>
<span class="w">    </span><span class="c1">// de primeiro e último como objetos autorreferenciados</span>
<span class="w">    </span><span class="k">private</span><span class="w"> </span><span class="n">Celula</span><span class="w"> </span><span class="n">primeiro</span><span class="p">,</span><span class="w"> </span><span class="n">ultimo</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// construtor vazio</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">ListaFlex</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ultimo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">primeiro</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Celula</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// obtendo o tamanho da lista</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">Tamanho</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">tamamho</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Celula</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">primeiro</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">ultimo</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">.</span><span class="n">prox</span><span class="p">)</span>
<span class="w">            </span><span class="n">tamanho</span><span class="o">++</span><span class="p">;</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">tamanho</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// lista dos métodos</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">InserirFim</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ultimo</span><span class="p">.</span><span class="n">prox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Celula</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="w">        </span><span class="n">ultimo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ultimo</span><span class="p">.</span><span class="n">prox</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">InserirInicio</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Celula</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Celula</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="w">        </span><span class="n">tmp</span><span class="p">.</span><span class="n">prox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">primeiro</span><span class="p">.</span><span class="n">prox</span><span class="p">;</span>
<span class="w">        </span><span class="n">primeiro</span><span class="p">.</span><span class="n">prox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">primeiro</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ultimo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">ultimo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">RemoverFim</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">primeiro</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ultimo</span><span class="p">)</span>
<span class="w">            </span><span class="n">Environment</span><span class="p">.</span><span class="n">Exit</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// loop para se chegar no penúltimo elemento</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Celula</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">primeiro</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="p">.</span><span class="n">prox</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">ultimo</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">.</span><span class="n">prox</span><span class="p">)</span>
<span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">elemento</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ultimo</span><span class="p">.</span><span class="n">elemento</span><span class="p">;</span>
<span class="w">            </span><span class="n">ultimo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">            </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ultimo</span><span class="p">.</span><span class="n">prox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">elemento</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">RemoverInicio</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// esse método mantém a cabeça da lista</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">primeiro</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ultimo</span><span class="p">)</span>
<span class="w">            </span><span class="n">Environment</span><span class="p">.</span><span class="n">Exit</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>

<span class="w">        </span><span class="n">Celula</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">primeiro</span><span class="p">.</span><span class="n">prox</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// a cabeça agora vai apontar para</span>
<span class="w">        </span><span class="c1">// o segundo elemento &quot;pulando&quot; o primeiro</span>
<span class="w">        </span><span class="n">primeiro</span><span class="p">.</span><span class="n">prox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">primeiro</span><span class="p">.</span><span class="n">prox</span><span class="p">.</span><span class="n">prox</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">elemento</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="p">.</span><span class="n">elemento</span><span class="p">;</span>
<span class="w">        </span><span class="n">tmp</span><span class="p">.</span><span class="n">prox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">        </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">elemento</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// atenção aqui: a posição 0 não é a da cabeça e sim</span>
<span class="w">    </span><span class="c1">// do primeiro elemento após ela, ou seja, primeiro.prox</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Inserir</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pos</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">tamanho</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Tamanho</span><span class="p">();</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pos</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">tamanho</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Environment</span><span class="p">.</span><span class="n">Exit</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pos</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">InserirInicio</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pos</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">tamanho</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">InserirFim</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Celula</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">primeiro</span><span class="p">;</span>

<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">                </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">.</span><span class="n">prox</span><span class="p">;</span>

<span class="w">            </span><span class="n">Celula</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Celula</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="w">            </span><span class="n">tmp</span><span class="p">.</span><span class="n">prox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">.</span><span class="n">prox</span><span class="p">;</span>
<span class="w">            </span><span class="n">i</span><span class="p">.</span><span class="n">prox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span>
<span class="w">            </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">Remover</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">pos</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">tamanho</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Tamanho</span><span class="p">();</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">primeiro</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ultimo</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Environment</span><span class="p">.</span><span class="n">Exit</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pos</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">elemento</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RemoverInicio</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pos</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">tamanho</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">elemento</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RemoverFim</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Celula</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">primeiro</span><span class="p">;</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">pos</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">                </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">.</span><span class="n">prox</span><span class="p">;</span>

<span class="w">            </span><span class="n">Celula</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">.</span><span class="n">prox</span><span class="p">;</span>
<span class="w">            </span><span class="n">elemento</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="p">.</span><span class="n">elemento</span><span class="p">;</span>
<span class="w">            </span><span class="n">i</span><span class="p">.</span><span class="n">prox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="p">.</span><span class="n">prox</span><span class="p">;</span>
<span class="w">            </span><span class="n">tmp</span><span class="p">.</span><span class="n">prox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">            </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">elemento</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Mostrar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;[&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Celula</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">primeiro</span><span class="p">.</span><span class="n">prox</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">.</span><span class="n">prox</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">elemento</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;]&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
O código dessa classe está disponível nesse <a href="https://gist.github.com/brunoruas2/9846e0c842209d25c8b32bd4d0808488">github gist</a>.</p>
<h3 id="arvore-binaria-e-tabela-hash">Árvore Binária e Tabela Hash</h3>
<h4 id="arvore-binaria">Árvore Binária</h4>
<p>Nas listas, o custo das atividades de inserção, remoção e pesquisa costuma ser de <span class="arithmatex">\(\mathcal{O}(n)\)</span> enquanto, nas árvores, o custo tende a ser de <span class="arithmatex">\(\mathcal{O}(log(n))\)</span>. O motivo disso nós veremos mais a frente.</p>
<p>Para entendermos melhor sobre essa estrutura de dados, é muito útil ter uma representação visual dessa estrutura.</p>
<p><img alt="arvore binaria" src="../../../../assets/imgs/75-arvore-binaria.png" /></p>
<p>Podemos ver que usamos dois elementos para representar essa estrutura. As bolas são chamados de nós (ou vértices) e as linhas (ou setas) são chamadas de arestas.</p>
<p><strong>Comentário:</strong> Se você ficou com algum feeling que a relação entre esses pontos lembrou um pouco a <code>LinkedList&lt;T&gt;</code>, você tá no caminho certo.</p>
<p>Agora nós vamos aprender alguns conceitos importantes sobre essa estrutura que são termos usados para comunicar ideias a respeito desse objeto:</p>
<ul>
<li>Cada bola numerada é chamada de <strong>nó</strong></li>
<li>O nó mais alto é chamado de <strong>raiz</strong></li>
<li>Cada camada da árvore é chamada de <strong>nível</strong><sup id="fnref:6"><a class="footnote-ref" href="#fn:6">6</a></sup></li>
<li>Os nós que vêm após outro nó são chamados de <strong>filhos</strong></li>
<li>Todo nó que tem filho é chamado de <strong>nó interno</strong></li>
<li>Os nós sem filhos são chamados de <strong>folhas</strong> ou <strong>nós externos</strong></li>
<li>Podemos subdividir uma árvore em <strong>sub-árvores</strong> onde a raiz é um nó filho da árvore original</li>
<li>Chamamos de <strong>distância</strong> a contagem dos níveis entre 2 nós</li>
<li>Chamamos de <strong>altura</strong> da árvore a contagem dos níveis entre a raiz e a folha mais alta</li>
</ul>
<p>Todos esses conceitos acima são relacionados a qualquer estrutura de árvore. Entretanto, uma <strong>Árvore Binária</strong> é uma árvore em que cada nó possui, no máximo, 2 filhos.</p>
<p>Um tipo especial de árvore binária é a <strong>Árvore Binária de Pesquisa (ABP)</strong> ou <strong>Árvore Binária de Busca (ABB)</strong>. Ela é uma árvore binária com uma condição adicional: Os valores dos nós filhos à esquerda são sempre <strong>menores</strong> que o valor do nó pai e, ao contrário, os valores dos filhos à direta são sempre <strong>maiores</strong>. Compare a árvore que mostramos logo no começo com essa aqui abaixo.</p>
<p><img alt="Árvore Binária de Busca" src="../../../../assets/imgs/76-arvore-binaria-busca.png" /></p>
<p>Uma árvore é classificada como <strong>Árvore Balanceada</strong> se, para <strong>todos</strong> os nós, a diferença entre os níveis à esquerda e à direita seja <span class="arithmatex">\(\leq 1\)</span>. Outra maneira de afirmar a mesma coisa é dizer que a altura da sub-árvore esquerda menos a altura da sub-árvore direita pertence ao conjunto <span class="arithmatex">\(\{ -1, 0, 1 \}\)</span></p>
<p>Agora que definimos a nossa estrutura de dados, temos que criar alguns métodos que serão usados para a manipulação das informações gravadas nela. Para efeitos didáticos, a partir de agora vamos considerar que todas as árvores binárias serão de pesquisa.</p>
<p>Podemos criar uma árvore em c# com o seguinte código:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// c sharp</span>
<span class="k">class</span><span class="w"> </span><span class="nc">No</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">elemento</span><span class="p">;</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">esq</span><span class="p">,</span><span class="w"> </span><span class="n">dir</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// construtor do nó raiz</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">No</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">elemento</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">elemento</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elemento</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">esq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// construtor do nó filho</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="nf">No</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">elemento</span><span class="p">,</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">esq</span><span class="p">,</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">dir</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">elemento</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elemento</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">esq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">esq</span><span class="p">;</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="n">dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dir</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Mas não precisamos parar por aqui. Para ser uma estrutura de dados útil, precisamos maneiras de interagir com nossa árvore para realizar as operações de <strong>pesquisa</strong>, <strong>caminhamento</strong>, <strong>inserção</strong> e <strong>remoção</strong>.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// c sharp</span>
<span class="c1">// função de busca de um nó a partir do valor do seu elemento</span>
<span class="k">public</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="nf">Busca</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">valor</span><span class="p">,</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">no</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">no</span><span class="p">.</span><span class="n">elemento</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">valor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">no</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">valor</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">no</span><span class="p">.</span><span class="n">elemento</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nf">Busca</span><span class="p">(</span><span class="n">valor</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="p">.</span><span class="n">esq</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nf">Busca</span><span class="p">(</span><span class="n">valor</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="p">.</span><span class="n">dir</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// função que mostra os valores caminhando nos nós</span>
<span class="c1">// da esquerda para a direita</span>
<span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Caminhamento</span><span class="p">(</span><span class="n">No</span><span class="w"> </span><span class="n">no</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">Caminhamento</span><span class="p">(</span><span class="n">no</span><span class="p">.</span><span class="n">esq</span><span class="p">);</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="n">no</span><span class="p">.</span><span class="n">elemento</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">Caminhamento</span><span class="p">(</span><span class="n">no</span><span class="p">.</span><span class="n">dir</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// função de inserção de nós em uma árvore</span>
<span class="k">public</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="nf">Insercao</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">valor</span><span class="p">,</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">no</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Nós raiz</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">No</span><span class="p">(</span><span class="n">valor</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Essa iteração é muito inteligente porque</span>
<span class="w">    </span><span class="c1">// ela aplica a mesma lógica do caminhamento</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">valor</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">no</span><span class="p">.</span><span class="n">elemento</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">no</span><span class="p">.</span><span class="n">esq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Insercao</span><span class="p">(</span><span class="n">valor</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="p">.</span><span class="n">esq</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">no</span><span class="p">.</span><span class="n">dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Insercao</span><span class="p">(</span><span class="n">valor</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="p">.</span><span class="n">dir</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">no</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>A operação mais complexa de ser implantada em uma ABP é a de remoção. A principal dificuldade vem do problema da existência de filhos. Como sabemos, um nó pode ter:</p>
<ul>
<li>0 Filhos (nó folha)</li>
<li>1 Filho</li>
<li>2 Filhos</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">// Primeiro definimos uma função que vamos usar</span>
<span class="k">private</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="nf">FindMin</span><span class="p">(</span><span class="n">No</span><span class="w"> </span><span class="n">node</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">left</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">left</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">node</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">public</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="nf">Remove</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">valor</span><span class="p">,</span><span class="w"> </span><span class="n">No</span><span class="w"> </span><span class="n">no</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Se a árvore estiver vazia, retorne null.</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Se o valor a ser removido for menor que o valor do nó atual, vá para a subárvore esquerda.</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">valor</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">no</span><span class="p">.</span><span class="n">valor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">no</span><span class="p">.</span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Remove</span><span class="p">(</span><span class="n">no</span><span class="p">.</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">valor</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// Se o valor a ser removido for maior que o valor do nó atual, vá para a subárvore direita.</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">valor</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">no</span><span class="p">.</span><span class="n">valor</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">no</span><span class="p">.</span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Remove</span><span class="p">(</span><span class="n">no</span><span class="p">.</span><span class="n">right</span><span class="p">,</span><span class="w"> </span><span class="n">valor</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// Se o valor a ser removido for igual ao valor do nó atual, remova o nó.</span>
<span class="w">    </span><span class="c1">// Aqui vamos ter que levar olhar o problema dos nós filhos.</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Se o nó não tiver filhos, basta removê-lo.</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="p">.</span><span class="n">left</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">no</span><span class="p">.</span><span class="n">right</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">no</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="c1">// Se o nó tiver apenas um filho, substitua o nó pelo seu filho.</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="p">.</span><span class="n">left</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">no</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no</span><span class="p">.</span><span class="n">right</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">no</span><span class="p">.</span><span class="n">right</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">no</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no</span><span class="p">.</span><span class="n">left</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="c1">// Se o nó tiver dois filhos, encontre o sucessor do nó (o menor valor na subárvore direita) e substitua o nó pelo seu sucessor.</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">No</span><span class="w"> </span><span class="n">successor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FindMin</span><span class="p">(</span><span class="n">no</span><span class="p">.</span><span class="n">right</span><span class="p">);</span>
<span class="w">            </span><span class="n">no</span><span class="p">.</span><span class="n">valor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">successor</span><span class="p">.</span><span class="n">valor</span><span class="p">;</span>
<span class="w">            </span><span class="n">no</span><span class="p">.</span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Remove</span><span class="p">(</span><span class="n">no</span><span class="p">.</span><span class="n">right</span><span class="p">,</span><span class="w"> </span><span class="n">successor</span><span class="p">.</span><span class="n">valor</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">no</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Na parte final, nós optamos por usar a substituição pelo sucessor. Entretanto, poderíamos fazer a escolha pelo predecessor.</p>
<h5 id="balanceamento-de-arvores-binarias">Balanceamento de Árvores Binárias</h5>
<p>A vantagem da estrutura de árvore binária é que, como existe uma ordem de criação dos nós, podemos realizar pesquisas e, por consequência, remoções e inserções a um custo menor como vimos no começo dessa seção. Contudo, cabe destacar que essa vantagem só é verificada em casos onde a árvore está <strong>balanceada</strong>.</p>
<p>Para situações em que essa condição não é encontrada, podemos realizar o processo de balanceamento que verifica a árvore em busca de nós desbalanceado.</p>
<p>O processo de balanceamento usa uma técnica chamada <strong>rotacionamento</strong> dos nós. A ideia é que o nó desbalanceado "gira" em torno do seu nó filho em sentido horário ou anti-horário de modo a virar filho do seu filho. Calma, olhando a imagem fica mais fácil de entender.</p>
<p><img alt="giro" src="../../../../assets/imgs/77-giro-no.png" /></p>
<p>Na imagem acima, podemos ver que o nó 5 está desbalanceado à esquerda porque possui uma altura 2 à esquerda e 0 à direita. Então é realizado um giro que transforma o nó 5 em filho do nó 3. Dando a essa árvore o balanceamento que desejamos.</p>
<p>Agora que temos uma ideia do que é o rotacionamento, podemos aprofundar um pouco mais nos seus tipos. Ao todo, existem 4 tipos de rotações que podemos usar:</p>
<ul>
<li>Simples<ul>
<li>À esquerda</li>
<li>À direita</li>
</ul>
</li>
<li>Dupla<ul>
<li>Direita-Esquerda</li>
<li>Esquerda-Direita</li>
</ul>
</li>
</ul>
<p><strong>Comentário:</strong> Isso mesmo, a imagem anterior é uma rotação simples à direita.</p>
<p>A rotação dupla é, como o nome auto-explicativo indica, apenas a composição de rotações simples mas em sentidos contrários. Abaixo temos uma imagem explicativa para uma <strong>rotação dupla esquerda-direita</strong>.</p>
<p><img alt="giro-duplo" src="../../../../assets/imgs/78-giro-duplo.png" /></p>
<p>Outro conceito importante é a da <strong>Árvore Binária Adelson-Velsky e Landis (AVL)</strong> que foi proposta lá em 1962. Esses dois soviéticos foram quem primeiro definiram as condições necessárias para a construção de uma árvore balanceada a partir da medida chamada <strong>fator de balanceamento</strong> que pode ser calculada pela equação:</p>
<p><span class="arithmatex">\(fator(i) = altura\_{}direira(i) - altura\_{}esquerda(i)\)</span></p>
<p>Ao calcularmos o fator para todos os nós de uma árvore podemos verificar as rotações necessárias para o seu balanceamento. Abaixo temos um quadro com o resumo das regras.</p>
<table>
<thead>
<tr>
<th align="center">Fator do nó</th>
<th align="center">Fator do filho direito</th>
<th align="center">Fator do filho esquerdo</th>
<th align="center">Rotação</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">2</td>
<td align="center">1 <br> 0</td>
<td align="center"></td>
<td align="center">Simples esquerda</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">-1</td>
<td align="center"></td>
<td align="center">Dupla dir-esq</td>
</tr>
<tr>
<td align="center">-2</td>
<td align="center"></td>
<td align="center">-1 <br> 0</td>
<td align="center">Simples direita</td>
</tr>
<tr>
<td align="center">-2</td>
<td align="center"></td>
<td align="center">1</td>
<td align="center">Dupla esq-dir</td>
</tr>
</tbody>
</table>
<h4 id="tabela-hash">Tabela Hash</h4>
<p>Para finalizarmos nossa disciplina de Algoritmos e Estrutura de Dados, vamos ver as <code>tabelas hash</code>. Sim, o termo que vimos lá na primeira parte chamado <code>hashtable</code> é a aplicação em c# dessa estrutura.</p>
<p>A principal vantagem da tabela hash é que, como ela ordena o arquivo no momento da sua inserção usando a sua função de hash, o custo do acesso a essa informação é constante, ou seja <span class="arithmatex">\(\mathcal{O}(1)\)</span>.</p>
<p>A desvantagem é que temos um custo elevado se quisermos recuperar os registros em ordem. Podendo chegar a <span class="arithmatex">\(\mathcal{O}(n)\)</span></p>
<p>Quando queremos inserir elementos iguais na mesma tabela. Como a função de hash faz um mapeamento para algum subconjunto, se tentarmos inserir um elemento repetido (ou mesmo um outro elemento que gere um mesmo valor no mapeamento), teríamos uma <strong>colisão primária</strong>. Evitar esses problemas é o cerne de uma boa implementação dessa estrutura de dados.</p>
<p>Normalmente, temos 3 abordagens para evitar essas colisões:</p>
<ol>
<li>Hash direto com área de reserva (overflow): <br> Aqui, teremos uma área reservada em um array para tratar as colisões.</li>
<li>Hash direto com rehash: <br> Nessa abordagem temos duas funções de hash. Caso a primeira aponte para uma colisão, usaremos a segunda.</li>
<li>Hash indireto com lista flexível simples: <br> Assumimos que cada posição é uma lista flexível que pode apontar para outros elementos. Nesse caso, uma colisão entra como uma nova ligação na lista flexível.</li>
</ol>
<p>As classes <code>Hashtable</code> e <code>Dictionary&lt;TKey,TValue&gt;</code> implementam a tabela hash em c#. Contudo, fica aqui um aviso. A teoria clássica assume que a as chaves são <strong>obrigatoriamente</strong> números inteiros<sup id="fnref:7"><a class="footnote-ref" href="#fn:7">7</a></sup>.</p>
<p>Eu pedi ao chatGPT que mostrasse um exemplo da implementação dessa estrutura em c#. Ele optou por usar a Collection de hashtable (o que tá valendo).</p>
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="nn">System.Collections</span><span class="p">;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Program</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Criando uma nova tabela hash</span>
<span class="w">        </span><span class="n">Hashtable</span><span class="w"> </span><span class="n">hashtable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Hashtable</span><span class="p">();</span>

<span class="w">        </span><span class="c1">// Adicionando elementos à tabela hash</span>
<span class="w">        </span><span class="n">hashtable</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;chave1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;valor1&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">hashtable</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;chave2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;valor2&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">hashtable</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="s">&quot;chave3&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;valor3&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Acessando um elemento da tabela hash</span>
<span class="w">        </span><span class="kt">string</span><span class="w"> </span><span class="n">valorChave2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">string</span><span class="p">)</span><span class="n">hashtable</span><span class="p">[</span><span class="s">&quot;chave2&quot;</span><span class="p">];</span>
<span class="w">        </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;O valor da chave2 é: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">valorChave2</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Alterando um elemento da tabela hash</span>
<span class="w">        </span><span class="n">hashtable</span><span class="p">[</span><span class="s">&quot;chave1&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;novoValor1&quot;</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// Removendo um elemento da tabela hash</span>
<span class="w">        </span><span class="n">hashtable</span><span class="p">.</span><span class="n">Remove</span><span class="p">(</span><span class="s">&quot;chave3&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Iterando sobre os elementos da tabela hash</span>
<span class="w">        </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">DictionaryEntry</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">hashtable</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;A chave é: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="n">Key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; e o valor é: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">entry</span><span class="p">.</span><span class="n">Value</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// Verificando se a tabela hash contém uma chave específica</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">hashtable</span><span class="p">.</span><span class="n">ContainsKey</span><span class="p">(</span><span class="s">&quot;chave1&quot;</span><span class="p">))</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;A tabela hash contém a chave1.&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// Verificando se a tabela hash contém um valor específico</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">hashtable</span><span class="p">.</span><span class="n">ContainsValue</span><span class="p">(</span><span class="s">&quot;valor2&quot;</span><span class="p">))</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;A tabela hash contém o valor2.&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Mas aqui tá uma coisa interessante. Como será que essa collection lida com colisão primária? Bom, nenhum lugar é melhor que o próprio código da classe.</p>
<p>Podemos "navegar" pelo código de tudo que importamos no nosso programa simplesmente apertando ctrl e clicando no método. Por exemplo, podemos clicar no método <code>Add</code> do objeto hashtable para irmos exatamente no código que constrói esse método na classe <code>Hashtable</code>.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Adds an entry with the given key and value to this hashtable. An</span>
<span class="c1">// ArgumentException is thrown if the key is null or if the key is already</span>
<span class="c1">// present in the hashtable.</span>
<span class="c1">//</span>
<span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Add</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="kt">object?</span><span class="w"> </span><span class="k">value</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">Insert</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="k">value</span><span class="p">,</span><span class="w"> </span><span class="k">true</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Podemos ver que estamos usando a função <code>Insert</code> dentro desse método. Pois bem, vamos ver o que essa função faz?</p>
<div class="highlight"><pre><span></span><code><span class="c1">// Inserts an entry into this hashtable. This method is called from the Set</span>
<span class="c1">// and Add methods. If the add parameter is true and the given key already</span>
<span class="c1">// exists in the hashtable, an exception is thrown.</span>
<span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Insert</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="kt">object?</span><span class="w"> </span><span class="n">nvalue</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="k">add</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">key</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">ArgumentNullException</span><span class="p">(</span><span class="n">nameof</span><span class="p">(</span><span class="n">key</span><span class="p">),</span><span class="w"> </span><span class="n">SR</span><span class="p">.</span><span class="n">ArgumentNull_Key</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_count</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">_loadsize</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">expand</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">_occupancy</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">_loadsize</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">_count</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">100</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">rehash</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Assume we only have one thread writing concurrently.  Modify</span>
<span class="w">    </span><span class="c1">// buckets to contain new data, as long as we insert in the right order.</span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="n">hashcode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InitHash</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">_buckets</span><span class="p">.</span><span class="n">Length</span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="n">seed</span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="n">incr</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ntry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">emptySlotNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// We use the empty slot number to cache the first empty slot. We chose to reuse slots</span>
<span class="w">    </span><span class="c1">// create by remove that have the collision bit set over using up new slots.</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">bucketNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="n">seed</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="n">_buckets</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Set emptySlot number to current bucket if it is the first available bucket that we have seen</span>
<span class="w">        </span><span class="c1">// that once contained an entry and also has had a collision.</span>
<span class="w">        </span><span class="c1">// We need to search this entire collision chain because we have to ensure that there are no</span>
<span class="w">        </span><span class="c1">// duplicate entries in the table.</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">emptySlotNumber</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">key</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">_buckets</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">hash_coll</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">))</span><span class="c1">// (((buckets[bucketNumber].hash_coll &amp; unchecked(0x80000000))!=0)))</span>
<span class="w">            </span><span class="n">emptySlotNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bucketNumber</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// Insert the key/value pair into this bucket if this bucket is empty and has never contained an entry</span>
<span class="w">        </span><span class="c1">// OR</span>
<span class="w">        </span><span class="c1">// This bucket once contained an entry but there has never been a collision</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">key</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">null</span><span class="p">)</span><span class="w"> </span><span class="o">||</span>
<span class="w">            </span><span class="p">(</span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">key</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">_buckets</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">((</span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">hash_coll</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="k">unchecked</span><span class="p">(</span><span class="m">0</span><span class="n">x80000000</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)))</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// If we have found an available bucket that has never had a collision, but we&#39;ve seen an available</span>
<span class="w">            </span><span class="c1">// bucket in the past that has the collision bit set, use the previous bucket instead</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">emptySlotNumber</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// Reuse slot</span>
<span class="w">                </span><span class="n">bucketNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">emptySlotNumber</span><span class="p">;</span>

<span class="w">            </span><span class="c1">// We pretty much have to insert in this order.  Don&#39;t set hash</span>
<span class="w">            </span><span class="c1">// code until the value &amp; key are set appropriately.</span>
<span class="w">            </span><span class="n">_isWriterInProgress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="w">            </span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nvalue</span><span class="p">;</span>
<span class="w">            </span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">key</span><span class="p">;</span>
<span class="w">            </span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">hash_coll</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">hashcode</span><span class="p">;</span>
<span class="w">            </span><span class="n">_count</span><span class="o">++</span><span class="p">;</span>
<span class="w">            </span><span class="n">UpdateVersion</span><span class="p">();</span>
<span class="w">            </span><span class="n">_isWriterInProgress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>

<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// The current bucket is in use</span>
<span class="w">        </span><span class="c1">// OR</span>
<span class="w">        </span><span class="c1">// it is available, but has had the collision bit set and we have already found an available bucket</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(((</span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">hash_coll</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="m">0</span><span class="n">x7FFFFFFF</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">hashcode</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">            </span><span class="n">KeyEquals</span><span class="p">(</span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">))</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">add</span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">ArgumentException</span><span class="p">(</span><span class="n">SR</span><span class="p">.</span><span class="n">Format</span><span class="p">(</span><span class="n">SR</span><span class="p">.</span><span class="n">Argument_AddingDuplicate__</span><span class="p">,</span><span class="w"> </span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="n">_isWriterInProgress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="w">            </span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nvalue</span><span class="p">;</span>
<span class="w">            </span><span class="n">UpdateVersion</span><span class="p">();</span>
<span class="w">            </span><span class="n">_isWriterInProgress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>

<span class="w">            </span><span class="k">return</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="c1">// The current bucket is full, and we have therefore collided.  We need to set the collision bit</span>
<span class="w">        </span><span class="c1">// unless we have remembered an available slot previously.</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">emptySlotNumber</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span><span class="c1">// We don&#39;t need to set the collision bit here since we already have an empty slot</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">hash_coll</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">hash_coll</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="k">unchecked</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="m">0</span><span class="n">x80000000</span><span class="p">);</span>
<span class="w">                </span><span class="n">_occupancy</span><span class="o">++</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">bucketNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)(((</span><span class="kt">long</span><span class="p">)</span><span class="n">bucketNumber</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">incr</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="n">_buckets</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="o">++</span><span class="n">ntry</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">_buckets</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// This code is here if and only if there were no buckets without a collision bit set in the entire table</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">emptySlotNumber</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// We pretty much have to insert in this order.  Don&#39;t set hash</span>
<span class="w">        </span><span class="c1">// code until the value &amp; key are set appropriately.</span>
<span class="w">        </span><span class="n">_isWriterInProgress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="w">        </span><span class="n">_buckets</span><span class="p">[</span><span class="n">emptySlotNumber</span><span class="p">].</span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nvalue</span><span class="p">;</span>
<span class="w">        </span><span class="n">_buckets</span><span class="p">[</span><span class="n">emptySlotNumber</span><span class="p">].</span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">key</span><span class="p">;</span>
<span class="w">        </span><span class="n">_buckets</span><span class="p">[</span><span class="n">emptySlotNumber</span><span class="p">].</span><span class="n">hash_coll</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">hashcode</span><span class="p">;</span>
<span class="w">        </span><span class="n">_count</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="n">UpdateVersion</span><span class="p">();</span>
<span class="w">        </span><span class="n">_isWriterInProgress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>

<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// If you see this assert, make sure load factor &amp; count are reasonable.</span>
<span class="w">    </span><span class="c1">// Then verify that our double hash function (h2, described at top of file)</span>
<span class="w">    </span><span class="c1">// meets the requirements described above. You should never see this assert.</span>
<span class="w">    </span><span class="n">Debug</span><span class="p">.</span><span class="n">Fail</span><span class="p">(</span><span class="s">&quot;hash table insert failed!  Load factor too high, or our double hashing function is incorrect.&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="nf">InvalidOperationException</span><span class="p">(</span><span class="n">SR</span><span class="p">.</span><span class="n">InvalidOperation_HashInsertFailed</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Pois é. O negócio ficou sério. Isso ai é coisa de Senior. Entretanto, podemos focar em uma parte especial.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// The current bucket is full, and we have therefore collided.  We need to set the collision bit</span>
<span class="c1">// unless we have remembered an available slot previously.</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">emptySlotNumber</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">-</span><span class="m">1</span><span class="p">)</span>
<span class="p">{</span><span class="c1">// We don&#39;t need to set the collision bit here since we already have an empty slot</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">hash_coll</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">_buckets</span><span class="p">[</span><span class="n">bucketNumber</span><span class="p">].</span><span class="n">hash_coll</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="k">unchecked</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="m">0</span><span class="n">x80000000</span><span class="p">);</span>
<span class="w">        </span><span class="n">_occupancy</span><span class="o">++</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Eu sei, ainda tá punk. Mas olha só. Nós conhecemos um condicional. E aqui em cima temos um dentro do outro.</p>
<p>Ignorando o primeiro, vamos prestar atenção no de dentro. Ele parece fazer um teste se o hash do nosso elemento que foi inserido possui alguma colisão <code>.hash_coll &gt;= 0</code>. Se isso é verdade, ele está usando o token composto <code>|=</code> do operador de atribuição <code>=</code> com o lógico <code>||</code>. A gente viu algo parecido <a href="/CC_site/nav/PUC/periodo1/algoritmos_e_logica/#operadores-e-funcoes-aritmeticas">aqui</a> e <a href="/CC_site/nav/PUC/periodo1/algoritmos_e_logica/#operadores-booleanos-e-comandos-if-aninhados">aqui</a>.</p>
<p><strong>Comentário:</strong> <code>a |= b</code> é a mesma coisa que <code>a = a | b</code>. Ou seja, temos uma operação lógica entre <code>_buckets[bucketNumber].hash_coll | unchecked((int)0x80000000)</code>. Sendo que esse treco <code>0x80000000</code> é o número hexadecimal para o número negativo mais baixo em um inteiro de 32 bits. Eu <strong>acho</strong> que ele usa esse fundo como indicativo de uso do slot no array de index.</p>
<p>Tudo bem se você não entender tudo que vimos até aqui. Principalmente nessa última parte. Com o tempo esse código vai ficar menos enigmático. O segredo é continuar estudando.</p>
<h2 id="bibliografia">Bibliografia</h2>
<ul>
<li>DEITEL, Harvey M.     <strong>C#: como programar</strong>. Editora Pearson.</li>
<li>SHARP, John.  <strong>Microsoft Visual C# 2008</strong>. Porto Alegre Bookman 2014.</li>
<li>ZIVIANI, N.   <strong>Projeto de Algoritmos com implementação em Java e C++</strong>.</li>
<li>CORMEN, T. H.,    <strong>Algoritmos: Teoria e Prática</strong>. São Paulo GEN LTC 2012.</li>
<li>SZWARCFITER, J. L..   <strong>Estruturas de dados e seus algoritmos</strong> LTC 2010.</li>
<li>GOODRICH, M. T.,  <strong>Estruturas de dados e Algoritmos em Java</strong>. Porto Alegre: Bookman, 2013.</li>
<li>DROZDEZ, A.   <strong>Estrutura de dados e algoritmos em C++</strong>. São Paulo, Cengage Learning, 2018.</li>
</ul>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Eu não vou mais explicar nos detalhes o que os códigos vão fazer porque você já deve ser capaz de analisar e entender sozinho.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>Ainda não vimos esse assunto mas aqui tem um <a href="https://www.youtube.com/watch?v=MFhxShGxHWc">link de um vídeo do youtube</a> que explica muito bem o conceito (em inglês).&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>Vamos usar esse tipo de sintaxe mais a frente nesse microfundamento. Preste atenção nele!.&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p>Que a gente definiu logo acima como funções que medem o tempo médio de acesso de leitura para qualquer elemento em uma lista de tamanho <span class="arithmatex">\(n\)</span>.&#160;<a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:5">
<p>Pelo princípio do acesso aleatório, o fato de termos alocações ``espalhadas'' não deve ser um problema na hora de recuperar os valores da lista.&#160;<a class="footnote-backref" href="#fnref:5" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:6">
<p>A raiz está <strong>sempre</strong> no nível 0.&#160;<a class="footnote-backref" href="#fnref:6" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
<li id="fn:7">
<p>Já essas implementações aceitam qualquer tipo como index.&#160;<a class="footnote-backref" href="#fnref:7" title="Jump back to footnote 7 in the text">&#8617;</a></p>
</li>
</ol>
</div></p>
    </article>
</section>
<!-- endblock -->
            </main>

            
                    <!-- block preview -->
        <div class="row row-cols-md-3 text-center pt-md-3" id="component-preview">
            <div class="col themed-grid-col">
                <a rel="prev" href="../../periodo1/logica_comp/" class="nav-link">
                    <i class="fa fa-arrow-left"></i> Previous
                </a>
            </div>
            <div class="col themed-grid-col"></div>
            <div class="col themed-grid-col">
                <a rel="next" href="../engenharia_requisitos/" class="nav-link">
                    Next <i class="fa fa-arrow-right"></i>
                </a>
            </div>
        </div>
<!-- endblock -->
            

            
                    <!-- block footer -->
<footer class="pt-4 my-md-5 pt-md-5 border-top" id="component-footer">
    <div class="row">
        <div class="col-12 col-md">
                <!-- block copyright -->
    <small class="d-block mb-3">Bruno de Melo Ruas</small>

    <small class="d-block mb-3">
        Made with
        <a href="https://github.com/FernandoCelmer/mkdocs-simple-blog" target="_blank" rel="noopener">
            Simple Blog for MkDocs
        </a>
    </small>

<!-- endblock -->
        </div>
    </div>
</footer>
<!-- endblock -->
            
        </div>

            <script>var base_url = '../../../..';</script>
            <script src="../../../../assets/js/jquery-3.3.1.slim.min.js""></script>
            <script src="../../../../assets/js/bootstrap.bundle.min.js""></script>
            <script src="../../../../assets/js/main.min.js""></script>
                <script src="../../../../javascripts/config.js" defer></script>
                <script src="https://polyfill.io/v3/polyfill.min.js?features=es6" defer></script>
                <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" defer></script>
                <script src="../../../../search/main.js" defer></script>

    </body>

</html>